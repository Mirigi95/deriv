{"ast":null,"code":"var _s = $RefreshSig$();\n// src/websocket.js\nimport { useEffect, useState } from 'react';\nconst useDerivWebSocket = (apiToken, symbol) => {\n  _s();\n  const [tick, setTick] = useState(null);\n  const [error, setError] = useState(null);\n  const [ws, setWs] = useState(null);\n  useEffect(() => {\n    const socket = new WebSocket('wss://ws.binaryws.com/websockets/v3?app_id=1089');\n    socket.onopen = () => {\n      socket.send(JSON.stringify({\n        authorize: apiToken\n      }));\n    };\n    socket.onmessage = event => {\n      const response = JSON.parse(event.data);\n      if (response.error) {\n        setError(response.error.message);\n      }\n      if (response.msg_type === 'authorize') {\n        socket.send(JSON.stringify({\n          ticks: symbol,\n          subscribe: 1\n        }));\n      }\n      if (response.msg_type === 'tick') {\n        setTick(response.tick);\n      }\n    };\n    socket.onerror = event => {\n      setError(event.message);\n    };\n    socket.onclose = () => {\n      console.log('WebSocket closed');\n    };\n    setWs(socket);\n    return () => {\n      socket.close();\n    };\n  }, [apiToken, symbol]);\n  return {\n    tick,\n    error,\n    ws\n  };\n};\n_s(useDerivWebSocket, \"W5bqakm2LU4SnVjDvpHzUS+gV6A=\");\nexport default useDerivWebSocket;","map":{"version":3,"names":["useEffect","useState","useDerivWebSocket","apiToken","symbol","_s","tick","setTick","error","setError","ws","setWs","socket","WebSocket","onopen","send","JSON","stringify","authorize","onmessage","event","response","parse","data","message","msg_type","ticks","subscribe","onerror","onclose","console","log","close"],"sources":["/home/mtume/Gava/bima/src/Websocket.js"],"sourcesContent":["// src/websocket.js\nimport { useEffect, useState } from 'react';\n\nconst useDerivWebSocket = (apiToken, symbol) => {\n  const [tick, setTick] = useState(null);\n  const [error, setError] = useState(null);\n  const [ws, setWs] = useState(null);\n\n  useEffect(() => {\n    const socket = new WebSocket('wss://ws.binaryws.com/websockets/v3?app_id=1089');\n\n    socket.onopen = () => {\n      socket.send(JSON.stringify({ authorize: apiToken }));\n    };\n\n    socket.onmessage = (event) => {\n      const response = JSON.parse(event.data);\n\n      if (response.error) {\n        setError(response.error.message);\n      }\n\n      if (response.msg_type === 'authorize') {\n        socket.send(JSON.stringify({ ticks: symbol, subscribe: 1 }));\n      }\n\n      if (response.msg_type === 'tick') {\n        setTick(response.tick);\n      }\n    };\n\n    socket.onerror = (event) => {\n      setError(event.message);\n    };\n\n    socket.onclose = () => {\n      console.log('WebSocket closed');\n    };\n\n    setWs(socket);\n\n    return () => {\n      socket.close();\n    };\n  }, [apiToken, symbol]);\n\n  return { tick, error, ws };\n};\n\nexport default useDerivWebSocket;\n"],"mappings":";AAAA;AACA,SAASA,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAE3C,MAAMC,iBAAiB,GAAGA,CAACC,QAAQ,EAAEC,MAAM,KAAK;EAAAC,EAAA;EAC9C,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGN,QAAQ,CAAC,IAAI,CAAC;EACtC,MAAM,CAACO,KAAK,EAAEC,QAAQ,CAAC,GAAGR,QAAQ,CAAC,IAAI,CAAC;EACxC,MAAM,CAACS,EAAE,EAAEC,KAAK,CAAC,GAAGV,QAAQ,CAAC,IAAI,CAAC;EAElCD,SAAS,CAAC,MAAM;IACd,MAAMY,MAAM,GAAG,IAAIC,SAAS,CAAC,iDAAiD,CAAC;IAE/ED,MAAM,CAACE,MAAM,GAAG,MAAM;MACpBF,MAAM,CAACG,IAAI,CAACC,IAAI,CAACC,SAAS,CAAC;QAAEC,SAAS,EAAEf;MAAS,CAAC,CAAC,CAAC;IACtD,CAAC;IAEDS,MAAM,CAACO,SAAS,GAAIC,KAAK,IAAK;MAC5B,MAAMC,QAAQ,GAAGL,IAAI,CAACM,KAAK,CAACF,KAAK,CAACG,IAAI,CAAC;MAEvC,IAAIF,QAAQ,CAACb,KAAK,EAAE;QAClBC,QAAQ,CAACY,QAAQ,CAACb,KAAK,CAACgB,OAAO,CAAC;MAClC;MAEA,IAAIH,QAAQ,CAACI,QAAQ,KAAK,WAAW,EAAE;QACrCb,MAAM,CAACG,IAAI,CAACC,IAAI,CAACC,SAAS,CAAC;UAAES,KAAK,EAAEtB,MAAM;UAAEuB,SAAS,EAAE;QAAE,CAAC,CAAC,CAAC;MAC9D;MAEA,IAAIN,QAAQ,CAACI,QAAQ,KAAK,MAAM,EAAE;QAChClB,OAAO,CAACc,QAAQ,CAACf,IAAI,CAAC;MACxB;IACF,CAAC;IAEDM,MAAM,CAACgB,OAAO,GAAIR,KAAK,IAAK;MAC1BX,QAAQ,CAACW,KAAK,CAACI,OAAO,CAAC;IACzB,CAAC;IAEDZ,MAAM,CAACiB,OAAO,GAAG,MAAM;MACrBC,OAAO,CAACC,GAAG,CAAC,kBAAkB,CAAC;IACjC,CAAC;IAEDpB,KAAK,CAACC,MAAM,CAAC;IAEb,OAAO,MAAM;MACXA,MAAM,CAACoB,KAAK,CAAC,CAAC;IAChB,CAAC;EACH,CAAC,EAAE,CAAC7B,QAAQ,EAAEC,MAAM,CAAC,CAAC;EAEtB,OAAO;IAAEE,IAAI;IAAEE,KAAK;IAAEE;EAAG,CAAC;AAC5B,CAAC;AAACL,EAAA,CA5CIH,iBAAiB;AA8CvB,eAAeA,iBAAiB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}