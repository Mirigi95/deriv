{"ast":null,"code":"var _s = $RefreshSig$();\n// src/websocket.js\nimport { useEffect, useState } from 'react';\nconst useDerivWebSocket = (apiToken, symbol) => {\n  _s();\n  const [tick, setTick] = useState(null);\n  const [error, setError] = useState(null);\n  const [ws, setWs] = useState(null);\n  useEffect(() => {\n    const ws = new WebSocket('wss://ws.binaryws.com/websockets/v3?app_id=1089');\n    ws.onopen = () => {\n      ws.send(JSON.stringify({\n        authorize: apiToken\n      }));\n    };\n    ws.onmessage = event => {\n      const data = JSON.parse(event.data);\n      if (data.error) {\n        setError(data.error.message);\n      } else if (data.tick) {\n        setTick(data.tick);\n      }\n    };\n    ws.onerror = event => {\n      setError('WebSocket error');\n    };\n    setWs(ws);\n    return () => ws.close();\n  }, [apiToken, symbol]);\n  return {\n    tick,\n    error,\n    ws\n  };\n};\n_s(useDerivWebSocket, \"W5bqakm2LU4SnVjDvpHzUS+gV6A=\");\nexport default useDerivWebSocket;","map":{"version":3,"names":["useEffect","useState","useDerivWebSocket","apiToken","symbol","_s","tick","setTick","error","setError","ws","setWs","WebSocket","onopen","send","JSON","stringify","authorize","onmessage","event","data","parse","message","onerror","close"],"sources":["/home/mtume/Gava/bima/src/Websocket.js"],"sourcesContent":["// src/websocket.js\nimport { useEffect, useState } from 'react';\n\nconst useDerivWebSocket = (apiToken, symbol) => {\n  const [tick, setTick] = useState(null);\n  const [error, setError] = useState(null);\n  const [ws, setWs] = useState(null);\n\n  useEffect(() => {\n    const ws = new WebSocket('wss://ws.binaryws.com/websockets/v3?app_id=1089');\n\n    ws.onopen = () => {\n      ws.send(JSON.stringify({ authorize: apiToken }));\n    };\n\n    ws.onmessage = (event) => {\n      const data = JSON.parse(event.data);\n      if (data.error) {\n        setError(data.error.message);\n      } else if (data.tick) {\n        setTick(data.tick);\n      }\n    };\n\n    ws.onerror = (event) => {\n      setError('WebSocket error');\n    };\n\n    setWs(ws);\n\n    return () => ws.close();\n  }, [apiToken, symbol]);\n\n  return { tick, error, ws };\n};\n\nexport default useDerivWebSocket;\n"],"mappings":";AAAA;AACA,SAASA,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAE3C,MAAMC,iBAAiB,GAAGA,CAACC,QAAQ,EAAEC,MAAM,KAAK;EAAAC,EAAA;EAC9C,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGN,QAAQ,CAAC,IAAI,CAAC;EACtC,MAAM,CAACO,KAAK,EAAEC,QAAQ,CAAC,GAAGR,QAAQ,CAAC,IAAI,CAAC;EACxC,MAAM,CAACS,EAAE,EAAEC,KAAK,CAAC,GAAGV,QAAQ,CAAC,IAAI,CAAC;EAElCD,SAAS,CAAC,MAAM;IACd,MAAMU,EAAE,GAAG,IAAIE,SAAS,CAAC,iDAAiD,CAAC;IAE3EF,EAAE,CAACG,MAAM,GAAG,MAAM;MAChBH,EAAE,CAACI,IAAI,CAACC,IAAI,CAACC,SAAS,CAAC;QAAEC,SAAS,EAAEd;MAAS,CAAC,CAAC,CAAC;IAClD,CAAC;IAEDO,EAAE,CAACQ,SAAS,GAAIC,KAAK,IAAK;MACxB,MAAMC,IAAI,GAAGL,IAAI,CAACM,KAAK,CAACF,KAAK,CAACC,IAAI,CAAC;MACnC,IAAIA,IAAI,CAACZ,KAAK,EAAE;QACdC,QAAQ,CAACW,IAAI,CAACZ,KAAK,CAACc,OAAO,CAAC;MAC9B,CAAC,MAAM,IAAIF,IAAI,CAACd,IAAI,EAAE;QACpBC,OAAO,CAACa,IAAI,CAACd,IAAI,CAAC;MACpB;IACF,CAAC;IAEDI,EAAE,CAACa,OAAO,GAAIJ,KAAK,IAAK;MACtBV,QAAQ,CAAC,iBAAiB,CAAC;IAC7B,CAAC;IAEDE,KAAK,CAACD,EAAE,CAAC;IAET,OAAO,MAAMA,EAAE,CAACc,KAAK,CAAC,CAAC;EACzB,CAAC,EAAE,CAACrB,QAAQ,EAAEC,MAAM,CAAC,CAAC;EAEtB,OAAO;IAAEE,IAAI;IAAEE,KAAK;IAAEE;EAAG,CAAC;AAC5B,CAAC;AAACL,EAAA,CA/BIH,iBAAiB;AAiCvB,eAAeA,iBAAiB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}