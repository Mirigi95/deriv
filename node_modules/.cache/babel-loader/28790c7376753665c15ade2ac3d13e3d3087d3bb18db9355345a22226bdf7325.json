{"ast":null,"code":"var _jsxFileName = \"/home/mtume/Gava/bima/src/Trade.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport './App.css'; // Assuming you have some CSS for styling\nimport useDerivWebSocket from './Websocket'; // Ensure this hook is correctly implemented\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst apiToken = 'DqDY0LPWpXwcDke';\nconst symbol = 'R_100';\nfunction Trade() {\n  _s();\n  const {\n    tick,\n    error,\n    ws\n  } = useDerivWebSocket(apiToken, symbol);\n  const [lastTick, setLastTick] = useState(null);\n  const [activeContract, setActiveContract] = useState(null);\n  useEffect(() => {\n    if (tick && lastTick) {\n      const priceChange = tick.quote - lastTick.quote;\n      if (priceChange > 0) {\n        console.log('Price increased, considering buy...');\n        placeOrder('CALL');\n      } else if (priceChange < 0) {\n        console.log('Price decreased, considering sell...');\n        placeOrder('PUT');\n      }\n    }\n    setLastTick(tick);\n  }, [tick, lastTick]);\n  const placeOrder = async contractType => {\n    if (!ws) return;\n    const options = {\n      amount: 10,\n      // Stake amount\n      basis: 'stake',\n      // Basis\n      contract_type: contractType,\n      // Contract type ('CALL' or 'PUT')\n      currency: 'USD',\n      // Currency\n      duration: 1,\n      // Duration\n      duration_unit: 'm',\n      // Duration unit\n      symbol: symbol // Symbol\n    };\n    try {\n      const contract = {\n        contract_type: contractType,\n        ...options\n      };\n      const buyRequest = {\n        buy: 1,\n        price: 10,\n        // Amount you want to trade\n        parameters: contract\n      };\n      ws.send(JSON.stringify(buyRequest));\n      ws.onmessage = event => {\n        const response = JSON.parse(event.data);\n        if (response.msg_type === 'buy') {\n          console.log('Contract purchased:', response);\n          setActiveContract(response.buy.contract_id); // Store active contract ID\n        } else if (response.msg_type === 'proposal_open_contract') {\n          console.log('Contract update:', response);\n        }\n      };\n    } catch (error) {\n      console.error('Error placing order:', error);\n    }\n  };\n  const sellContract = async contractId => {\n    if (!ws || !contractId) return;\n    const sellRequest = {\n      sell: contractId,\n      price: 0 // Price can be specified as 0 to accept the current market price\n    };\n    try {\n      ws.send(JSON.stringify(sellRequest));\n      ws.onmessage = event => {\n        const response = JSON.parse(event.data);\n        if (response.msg_type === 'sell') {\n          console.log('Contract sold:', response);\n          setActiveContract(null); // Reset active contract after selling\n        }\n      };\n    } catch (error) {\n      console.error('Error selling contract:', error);\n    }\n  };\n  useEffect(() => {\n    if (activeContract) {\n      // Example logic to sell the contract after some time or condition\n      setTimeout(() => {\n        sellContract(activeContract);\n      }, 60000); // Sell contract after 1 minute (60000 milliseconds)\n    }\n  }, [activeContract]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"Trade\",\n    children: /*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"Trade-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Deriv Trading Bot\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 9\n      }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          color: 'red'\n        },\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 19\n      }, this), tick && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Symbol: \", tick.symbol]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Quote: \", tick.quote]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 98,\n    columnNumber: 5\n  }, this);\n}\n_s(Trade, \"cy/QiTEvLAb/25IeUXx0oNXllfg=\", false, function () {\n  return [useDerivWebSocket];\n});\n_c = Trade;\nexport default Trade;\nvar _c;\n$RefreshReg$(_c, \"Trade\");","map":{"version":3,"names":["React","useEffect","useState","useDerivWebSocket","jsxDEV","_jsxDEV","apiToken","symbol","Trade","_s","tick","error","ws","lastTick","setLastTick","activeContract","setActiveContract","priceChange","quote","console","log","placeOrder","contractType","options","amount","basis","contract_type","currency","duration","duration_unit","contract","buyRequest","buy","price","parameters","send","JSON","stringify","onmessage","event","response","parse","data","msg_type","contract_id","sellContract","contractId","sellRequest","sell","setTimeout","className","children","fileName","_jsxFileName","lineNumber","columnNumber","style","color","_c","$RefreshReg$"],"sources":["/home/mtume/Gava/bima/src/Trade.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport './App.css'; // Assuming you have some CSS for styling\nimport useDerivWebSocket from './Websocket';// Ensure this hook is correctly implemented\n\nconst apiToken = 'DqDY0LPWpXwcDke';\nconst symbol = 'R_100';\n\nfunction Trade() {\n  const { tick, error, ws } = useDerivWebSocket(apiToken, symbol);\n  const [lastTick, setLastTick] = useState(null);\n  const [activeContract, setActiveContract] = useState(null);\n\n  useEffect(() => {\n    if (tick && lastTick) {\n      const priceChange = tick.quote - lastTick.quote;\n\n      if (priceChange > 0) {\n        console.log('Price increased, considering buy...');\n        placeOrder('CALL');\n      } else if (priceChange < 0) {\n        console.log('Price decreased, considering sell...');\n        placeOrder('PUT');\n      }\n    }\n    setLastTick(tick);\n  }, [tick, lastTick]);\n\n  const placeOrder = async (contractType) => {\n    if (!ws) return;\n\n    const options = {\n      amount: 10, // Stake amount\n      basis: 'stake', // Basis\n      contract_type: contractType, // Contract type ('CALL' or 'PUT')\n      currency: 'USD', // Currency\n      duration: 1, // Duration\n      duration_unit: 'm', // Duration unit\n      symbol: symbol, // Symbol\n    };\n\n    try {\n      const contract = { contract_type: contractType, ...options };\n      const buyRequest = {\n        buy: 1,\n        price: 10, // Amount you want to trade\n        parameters: contract,\n      };\n\n      ws.send(JSON.stringify(buyRequest));\n\n      ws.onmessage = (event) => {\n        const response = JSON.parse(event.data);\n        if (response.msg_type === 'buy') {\n          console.log('Contract purchased:', response);\n          setActiveContract(response.buy.contract_id); // Store active contract ID\n        } else if (response.msg_type === 'proposal_open_contract') {\n          console.log('Contract update:', response);\n        }\n      };\n    } catch (error) {\n      console.error('Error placing order:', error);\n    }\n  };\n\n  const sellContract = async (contractId) => {\n    if (!ws || !contractId) return;\n\n    const sellRequest = {\n      sell: contractId,\n      price: 0, // Price can be specified as 0 to accept the current market price\n    };\n\n    try {\n      ws.send(JSON.stringify(sellRequest));\n\n      ws.onmessage = (event) => {\n        const response = JSON.parse(event.data);\n        if (response.msg_type === 'sell') {\n          console.log('Contract sold:', response);\n          setActiveContract(null); // Reset active contract after selling\n        }\n      };\n    } catch (error) {\n      console.error('Error selling contract:', error);\n    }\n  };\n\n  useEffect(() => {\n    if (activeContract) {\n      // Example logic to sell the contract after some time or condition\n      setTimeout(() => {\n        sellContract(activeContract);\n      }, 60000); // Sell contract after 1 minute (60000 milliseconds)\n    }\n  }, [activeContract]);\n\n  return (\n    <div className=\"Trade\">\n      <header className=\"Trade-header\">\n        <h1>Deriv Trading Bot</h1>\n        {error && <p style={{ color: 'red' }}>{error}</p>}\n        {tick && (\n          <div>\n            <p>Symbol: {tick.symbol}</p>\n            <p>Quote: {tick.quote}</p>\n          </div>\n        )}\n      </header>\n    </div>\n  );\n}\n\nexport default Trade;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}